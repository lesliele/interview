<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  
</body>
<script>
  // ES2016
  // 1.Array.prototype.includes å¯ä»¥è½»æ¾æŸ¥æ‰¾æ•°ç»„ä¸­æ˜¯å¦æœ‰æŒ‡å®šå†…å®¹(åŒ…æ‹¬ NaN)ã€‚
  const arr = [1, 2, 3, 4, 5, NaN];

  if (arr.indexOf(3) >= 0) {
    console.log(true)
  }

  if (arr.includes(3)) {
    console.log(true)
  }
  console.log(arr.indexOf(NaN)) //-1
  console.log(arr.includes(NaN)) //true
  console.log('1==============================')
  // ES2017
  // 1.Object.entries() ä»¥æ•°ç»„æ–¹å¼è¿”å›é”®å’Œå€¼ã€‚ è¿™ä½¿å¾—åœ¨å¾ªç¯ä¸­ä½¿ç”¨å¯¹è±¡æˆ–å°†å¯¹è±¡è½¬æ¢ä¸ºæ˜ å°„ç­‰æ“ä½œå˜å¾—éå¸¸ç®€å•ã€‚
  const cars = {
    a: 1,
    b: 2,
    c: 3
  };
  console.log(Object.entries(cars))
  for (let [key, value] of Object.entries(cars)) {
    console.log(key, value);
  }
  const map = new Map(Object.entries(cars))
  console.log(map)
  console.log('2==============================')
  // 2.String.prototype.padStart å’Œ String.prototype.padEnd å…è®¸åœ¨åˆå§‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–æœ«å°¾è¿½åŠ /å‰ç½®ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–å­—ç¬¦ä¸²ã€‚

  // æœ‰ä¸€ä¸ªä¸åŒé•¿åº¦çš„æ•°å­—åˆ—è¡¨ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨â€œ0â€ä¸ºè¿½åŠ ç¬¦è®©æ‰€æœ‰é¡¹é•¿åº¦éƒ½ä¸º10ä½
  const formatted = [0, 1, 12, 123, 1234, 12345].map(item => {
    return item.toString().padStart(10, '0');
  });
  console.log(formatted);
  // 0: "0000000000"
  // 1: "0000000001"
  // 2: "0000000012"
  // 3: "0000000123"
  // 4: "0000001234"
  // 5: "0000012345"
  console.log('3==============================')

  // padEndã€padStartå’Œ Object.entries çš„ä¸€ä¸ªå¾ˆå¥½çš„å®é™…ç¤ºä¾‹
  const cars2 = {
    'ğŸš™BMW': '10',
    'ğŸš˜Tesla': '5',
    'ğŸš–Lamborghini': '0'
  };
  Object.entries(cars2).map(([name, count]) => {
    console.log(`${name.padEnd(20, '-')} count: ${count.padStart(3, '0')}`)
  });
  console.log('4==============================')

  // 3.Async/Await å®ƒå‡å®š wait ä¹‹åçš„è¡¨è¾¾å¼è¿”å›ä¸€ä¸ª promise ï¼Œå¹¶åœ¨è¿›ä¸€æ­¥ç§»åŠ¨ä¹‹å‰ç­‰å¾…è¯¥ promise è¢« resolved æˆ– rejectedã€‚
  // ES2015-Promise
  function getAmount(userId) {
    getUser(userId)
      .then(getBankBalance)
      .then(amount => {
        console.log(amount)
        console.log('5==============================')
      })
  }
  // ES2017
  async function getAmount2(userId) {
    let user = await getUser(userId);
    let amount = await getBankBalance(user);
    console.log(amount)
    console.log('5==============================')
  }

  function getUser(userId) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('john');
      }, 1000);
    })
  }
  function getBankBalance(user) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        if (user === 'john') {
          resolve('$1000')
        } else {
          reject('unknow user')
        }
      }, 1000);
    })
  }
  // getAmount("1");
  getAmount2("1");

  // ES2018
  // 1.æ­£åˆ™è¡¨è¾¾å¼çš„â€œdotallâ€æ ‡å¿—
  // è™½ç„¶ç‚¹(â€œ.â€)åº”è¯¥åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œä½†å®ƒä¸åŒ¹é…åƒ \n \r \f ç­‰æ–°è¡Œå­—ç¬¦ã€‚
  console.log(/first.second/.test('first\nsecond'));
  console.log('6==============================')
  // è¿™ç§å¢å¼ºä½¿ ç‚¹ è¿ç®—ç¬¦èƒ½å¤ŸåŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚ä¸ºäº†ç¡®ä¿å®ƒä¸ä¼šç ´åä»»ä½•ä¸œè¥¿ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼æ—¶ä½¿ç”¨\sæ ‡å¿—ã€‚
  console.log(/first.second/s.test('first\nsecond'))
  console.log('6==============================')

  // 2.å‘½åç»„
  // ES5
  let re1 = /(\d{4})-(\d{2})-(\d{2})/
  let result1 = re1.exec('2015-02-02')
  console.log(result1)
  console.log('7==============================')

  // ES2018
  let re2 = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/
  let result2 = re2.exec('2015-02-02')
  console.log(result2)
  console.log('7==============================')

  // åœ¨ String.prototype.replace ä¸­ä½¿ç”¨ named groups
  let re3 = /(?<firstname>[A-Za-z]+) (?<lastname>[A-Za-z]+)/
  console.log('hello world'.replace(re3, `$<lastname> $<firstname>`))
  console.log('hello world'.replace(re3, `$2 $1`))
  console.log('8==============================')
</script>
</html>